# ECE4180FinalProject
This arcade shooter game is designed to entertain users with easy, medium, and hard difficulty selections. After selecting a game mode from the welcome screen, a countdown initiates before beginning the game, at which point targets begin rising from a horizontal “inactive” state to become “active” at a vertical state with shining, blue LEDs to backlight them. As your chosen difficulty increases, frequency of active targets increases and their active duration decreases. A welcome tune can be heard at the beginning of each game and game over after the full 45 seconds of gameplay, as well as target hit sounds upon successful target elimination. Each target is worth 10 points, to which your final score is incremented and compared with a system highscore.

Click to watch demo video:

[![Watch the video](https://img.youtube.com/vi/DnWAM95HVFc/hqdefault.jpg)](https://www.youtube.com/watch?v=DnWAM95HVFc)
# Technical Design
The 14” x 10” x 14” wooden game box’s interior electronics are composed of various peripherals. All three of the targets’ parts include: three servo motors, three 1.5mm blue LEDs, and 3 HX-M121 IR receivers all attached to wooden dowels and 4” diameter, laser-cut wooden circles with a sensor hole drilled in the center. All targets are controlled by a single ESP32-C6, whereas the MSP4022 uLCD screen is controlled by a separate microcontroller of the same variety via SPI communication. Each ESP32 is powered by its own separate 5V barrel jack, so as to prevent power noise on the display or current-related issues. Microcontrollers share ground and communicate serially via UART on their software-designated TX and RX pins for score updates and difficulty selection. With a 50% probability, target servos move from 180° (horizontal, inactive)  to 90° (vertical, active) and their respective LEDs light—sensors are now waiting to receive an IR signal from the HX-53 IR transmitter, mounted inside of a toy gun with a laser, both activated by a push-button and powered by three LR-44 batteries in series. Upon receiving the signal, that target’s ISR executes and causes servos to move back down and LEDs to turn off (the same response occurs for targets that were not hit within the active timeframe, but no hit sound effect occurs). Libraries used include ESP32Servo.h, esp32-hal-ledc.h, HardwareSerial.h, LovyanGFX.hpp, Preferences.h, math.h.

# Challenges
Some of the challenges we encountered caused delays in our completion timeline due to incorrect functionality. Namely, the servo library we used, ESP32Servo.h, did not support the use of a third servo. Initially, we speculated the malfunction was due to power issues or improper pins, but upon alternating pin assignments and connecting to auxiliary power sources, it proved to instead be this extraneous issue. As a solution for the third servo, we introduced individual helper methods for PWM duty cycle calculation, as the library did not properly assign the third servo a functioning PWM channel. Additionally, for the transmitter gun, we needed to power both an IR transmitter and aiming laser, both activated by a push button. The model gun we purchased housed 2 AA batteries, supplying 3V—2V shy of powering the transmitter and laser successfully. So, we installed contact points for 3 LR-44 button batteries inside the gun and inserted these batteries, totaling 4.7V; slightly under, but it remains acceptable for each component. Lastly, to facilitate secure servo attachment inside of the game box, the correct “popping up” action then required software adjustment and testing for servo angle writing.

# Future Design Choices
Some impossibilities include the limitation of screen brightness of our uLCD; the demonstrated brightness was the peripheral’s maximum and in order to improve upon it, a different peripheral would be necessary. Additionally, we wished to create a cleaner, top panel to house servos and wires underneath the panel, but could not due to limited resources; this would be something we would add in a future iteration. Similar projects utilize phototransistors to detect laser pointers, however, we opted to use IR to avoid light sensitivity conflicts. Despite this, certain lighting fixtures can interfere with receiver signals (in the demonstration video, a makeshift awning extension was necessary due to this). If we had more time, we would likely shrink targets and add additional servo motors with their proper mechanisms for more complicated motion (i.e. y-axis or x-axis oscillatory motion, arching motion, rotation, etc.). For aesthetic appeal, we would add a ring of LEDs lining the inside of the targets and then create cleaner-looking buttons with drilled holes to house them. For useability, we would reduce the amount of wires used by creating PCBs for targets and other peripherals as well as have a stronger power source to be drawn from by both the targets and uLCD screen.
